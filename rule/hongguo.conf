# 红果短剧持久化去广告规则
# 专门解决广告重新出现的问题
# 使用方法：将此文件作为远程资源引用到QuantumultX

# 核心广告屏蔽规则（最高优先级）
^https?://.*\.beibeicloud\.shop/.*$ url reject
^https?://.*\.hongguo\.com/.*ad.*$ url reject
^https?://api\.hongguo\.com/.*advertisement.*$ url reject
^https?://.*\.hongguo\.com/.*banner.*$ url reject
^https?://.*\.hongguo\.com/.*promotion.*$ url reject
^https?://.*\.hongguo\.com/.*sponsor.*$ url reject
^https?://.*\.hongguo\.com/.*popup.*$ url reject
^https?://.*\.hongguo\.com/.*splash.*$ url reject
^https?://.*\.hongguo\.com/.*startup.*$ url reject

# 视频插播广告屏蔽（重点优化）
^https?://.*\.beibeicloud\.shop/.*video.*$ url reject
^https?://.*\.beibeicloud\.shop/.*player.*$ url reject
^https?://.*\.beibeicloud\.shop/.*episode.*$ url reject
^https?://.*\.beibeicloud\.shop/.*play.*$ url reject
^https?://.*\.beibeicloud\.shop/.*stream.*$ url reject
^https?://.*\.beibeicloud\.shop/.*media.*$ url reject
^https?://.*\.hongguo\.com/.*video.*ad.*$ url reject
^https?://.*\.hongguo\.com/.*player.*ad.*$ url reject
^https?://.*\.hongguo\.com/.*episode.*ad.*$ url reject
^https?://.*\.hongguo\.com/.*play.*ad.*$ url reject
^https?://.*\.hongguo\.com/.*stream.*ad.*$ url reject
^https?://.*\.hongguo\.com/.*media.*ad.*$ url reject
^https?://.*\.hongguo\.com/.*transition.*$ url reject
^https?://.*\.hongguo\.com/.*switch.*$ url reject
^https?://.*\.hongguo\.com/.*next.*$ url reject
^https?://.*\.hongguo\.com/.*prev.*$ url reject
^https?://.*\.hongguo\.com/.*continue.*$ url reject

# 动态广告路径屏蔽（防止轮换）
^https?://.*\.beibeicloud\.shop/.*subscribe.*$ url reject
^https?://.*\.beibeicloud\.shop/.*client.*$ url reject
^https?://.*\.beibeicloud\.shop/.*api.*$ url reject
^https?://.*\.beibeicloud\.shop/.*v1.*$ url reject
^https?://.*\.hongguo\.com/.*feed.*$ url reject
^https?://.*\.hongguo\.com/.*timeline.*$ url reject
^https?://.*\.hongguo\.com/.*recommend.*$ url reject
^https?://.*\.hongguo\.com/.*hot.*$ url reject
^https?://.*\.hongguo\.com/.*trending.*$ url reject

# 会话管理屏蔽（防止重新检测）
^https?://.*\.beibeicloud\.shop/.*session.*$ url reject
^https?://.*\.beibeicloud\.shop/.*heartbeat.*$ url reject
^https?://.*\.beibeicloud\.shop/.*ping.*$ url reject
^https?://.*\.beibeicloud\.shop/.*status.*$ url reject
^https?://.*\.beibeicloud\.shop/.*check.*$ url reject
^https?://.*\.hongguo\.com/.*session.*$ url reject
^https?://.*\.hongguo\.com/.*heartbeat.*$ url reject
^https?://.*\.hongguo\.com/.*ping.*$ url reject
^https?://.*\.hongguo\.com/.*status.*$ url reject
^https?://.*\.hongguo\.com/.*check.*$ url reject
^https?://.*\.hongguo\.com/.*verify.*$ url reject
^https?://.*\.hongguo\.com/.*validate.*$ url reject

# 用户行为分析屏蔽
^https?://.*\.beibeicloud\.shop/.*analytics.*$ url reject
^https?://.*\.beibeicloud\.shop/.*tracking.*$ url reject
^https?://.*\.beibeicloud\.shop/.*monitor.*$ url reject
^https?://.*\.beibeicloud\.shop/.*report.*$ url reject
^https?://.*\.hongguo\.com/.*analytics.*$ url reject
^https?://.*\.hongguo\.com/.*tracking.*$ url reject
^https?://.*\.hongguo\.com/.*monitor.*$ url reject
^https?://.*\.hongguo\.com/.*report.*$ url reject
^https?://.*\.hongguo\.com/.*statistics.*$ url reject

# 第三方广告域名屏蔽
^https?://.*\.adsystem\.com/.*$ url reject
^https?://.*\.adnxs\.com/.*$ url reject
^https?://.*\.amazon-adsystem\.com/.*$ url reject
^https?://.*\.googlesyndication\.com/.*$ url reject
^https?://.*\.doubleclick\.net/.*$ url reject
^https?://.*\.taifutj\.com/.*$ url reject

# 视频插播广告内容替换（重点优化）
^https?://.*\.beibeicloud\.shop/.*$ url response-body "video_ad":\s*\{[^}]*\} response-body "video_ad":{}
^https?://.*\.beibeicloud\.shop/.*$ url response-body "episode_ad":\s*\{[^}]*\} response-body "episode_ad":{}
^https?://.*\.beibeicloud\.shop/.*$ url response-body "transition_ad":\s*\{[^}]*\} response-body "transition_ad":{}
^https?://.*\.beibeicloud\.shop/.*$ url response-body "interstitial":\s*\{[^}]*\} response-body "interstitial":{}
^https?://.*\.beibeicloud\.shop/.*$ url response-body "midroll":\s*\{[^}]*\} response-body "midroll":{}
^https?://.*\.beibeicloud\.shop/.*$ url response-body "preroll":\s*\{[^}]*\} response-body "preroll":{}
^https?://.*\.beibeicloud\.shop/.*$ url response-body "postroll":\s*\{[^}]*\} response-body "postroll":{}
^https?://.*\.hongguo\.com/.*$ url response-body "video_ad":\s*\{[^}]*\} response-body "video_ad":{}
^https?://.*\.hongguo\.com/.*$ url response-body "episode_ad":\s*\{[^}]*\} response-body "episode_ad":{}
^https?://.*\.hongguo\.com/.*$ url response-body "transition_ad":\s*\{[^}]*\} response-body "transition_ad":{}
^https?://.*\.hongguo\.com/.*$ url response-body "interstitial":\s*\{[^}]*\} response-body "interstitial":{}
^https?://.*\.hongguo\.com/.*$ url response-body "midroll":\s*\{[^}]*\} response-body "midroll":{}
^https?://.*\.hongguo\.com/.*$ url response-body "preroll":\s*\{[^}]*\} response-body "preroll":{}
^https?://.*\.hongguo\.com/.*$ url response-body "postroll":\s*\{[^}]*\} response-body "postroll":{}

# 广告内容替换（防止重新加载）
^https?://.*\.beibeicloud\.shop/.*$ url response-body "status":"fail" response-body "status":"success"
^https?://.*\.beibeicloud\.shop/.*$ url response-body "message":"token is error" response-body "message":"success"
^https?://.*\.beibeicloud\.shop/.*$ url response-body "data":null response-body "data":{}
^https?://.*\.hongguo\.com/.*$ url response-body "advertisement":\s*\{[^}]*\} response-body "advertisement":{}
^https?://.*\.hongguo\.com/.*$ url response-body "ads":\s*\[[^\]]*\] response-body "ads":[]
^https?://.*\.hongguo\.com/.*$ url response-body "banner":\s*\{[^}]*\} response-body "banner":{}
^https?://.*\.hongguo\.com/.*$ url response-body "promotion":\s*\{[^}]*\} response-body "promotion":{}
^https?://.*\.hongguo\.com/.*$ url response-body "popup":\s*\{[^}]*\} response-body "popup":{}
^https?://.*\.hongguo\.com/.*$ url response-body "splash":\s*\{[^}]*\} response-body "splash":{}
^https?://.*\.hongguo\.com/.*$ url response-body "commercial":\s*\{[^}]*\} response-body "commercial":{}
^https?://.*\.hongguo\.com/.*$ url response-body "marketing":\s*\{[^}]*\} response-body "marketing":{}
^https?://.*\.hongguo\.com/.*$ url response-body "campaign":\s*\[[^\]]*\] response-body "campaign":[]
^https?://.*\.hongguo\.com/.*$ url response-body "promo":\s*\{[^}]*\} response-body "promo":{}
^https?://.*\.hongguo\.com/.*$ url response-body "brand":\s*\{[^}]*\} response-body "brand":{}
^https?://.*\.hongguo\.com/.*$ url response-body "sponsor":\s*\{[^}]*\} response-body "sponsor":{}

# 广告配置替换（防止重新启用）
^https?://.*\.hongguo\.com/.*$ url response-body "ad_enabled":\s*true response-body "ad_enabled":false
^https?://.*\.hongguo\.com/.*$ url response-body "ad_config":\s*\{[^}]*\} response-body "ad_config":{"enabled":false,"frequency":0,"timeout":0}
^https?://.*\.hongguo\.com/.*$ url response-body "user_type":\s*"free" response-body "user_type":"premium"
^https?://.*\.hongguo\.com/.*$ url response-body "premium":\s*false response-body "premium":true
^https?://.*\.hongguo\.com/.*$ url response-body "ad_free":\s*false response-body "ad_free":true

# HTML广告标签移除
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*class="[^"]*splash[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*id="[^"]*splash[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*class="[^"]*banner[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*id="[^"]*banner[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*class="[^"]*popup[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*id="[^"]*popup[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*class="[^"]*video-ad[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*id="[^"]*video-ad[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*class="[^"]*advertisement[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*class="[^"]*promotion[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <div[^>]*class="[^"]*sponsor[^"]*"[^>]*>.*?</div> response-body ""

# 广告脚本移除
^https?://.*\.hongguo\.com/.*$ url response-body <script[^>]*src="[^"]*ad[^"]*"[^>]*>.*?</script> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <script[^>]*>.*?advertisement.*?</script> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <script[^>]*>.*?banner.*?</script> response-body ""

# iframe广告移除
^https?://.*\.hongguo\.com/.*$ url response-body <iframe[^>]*src="[^"]*ad[^"]*"[^>]*>.*?</iframe> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <iframe[^>]*src="[^"]*banner[^"]*"[^>]*>.*?</iframe> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <iframe[^>]*src="[^"]*promotion[^"]*"[^>]*>.*?</iframe> response-body ""

# 图片广告移除
^https?://.*\.hongguo\.com/.*$ url response-body <img[^>]*src="[^"]*ad[^"]*"[^>]*> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <img[^>]*src="[^"]*banner[^"]*"[^>]*> response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body <img[^>]*src="[^"]*promotion[^"]*"[^>]*> response-body ""

# CSS样式广告隐藏
^https?://.*\.hongguo\.com/.*$ url response-body \.ad[^}]*\{[^}]*\} response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body \.banner[^}]*\{[^}]*\} response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body \.promotion[^}]*\{[^}]*\} response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body \.sponsor[^}]*\{[^}]*\} response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body \.popup[^}]*\{[^}]*\} response-body ""
^https?://.*\.hongguo\.com/.*$ url response-body \.splash[^}]*\{[^}]*\} response-body ""
