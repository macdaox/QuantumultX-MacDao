# 河马短剧持久化去广告规则
# 专门解决广告重新出现的问题
# 使用方法：将此文件作为远程资源引用到QuantumultX

# 核心广告屏蔽规则（最高优先级）
^https?://.*\.hemadrama\.com/.*ad.*$ url reject
^https?://api\.hemadrama\.com/.*advertisement.*$ url reject
^https?://.*\.hemadrama\.com/.*banner.*$ url reject
^https?://.*\.hemadrama\.com/.*promotion.*$ url reject
^https?://.*\.hemadrama\.com/.*sponsor.*$ url reject
^https?://.*\.hemadrama\.com/.*popup.*$ url reject
^https?://.*\.hemadrama\.com/.*splash.*$ url reject
^https?://.*\.hemadrama\.com/.*startup.*$ url reject

# 视频插播广告屏蔽（重点优化）
^https?://.*\.hemadrama\.com/.*video.*$ url reject
^https?://.*\.hemadrama\.com/.*player.*$ url reject
^https?://.*\.hemadrama\.com/.*episode.*$ url reject
^https?://.*\.hemadrama\.com/.*play.*$ url reject
^https?://.*\.hemadrama\.com/.*stream.*$ url reject
^https?://.*\.hemadrama\.com/.*media.*$ url reject
^https?://.*\.hemadrama\.com/.*transition.*$ url reject
^https?://.*\.hemadrama\.com/.*switch.*$ url reject
^https?://.*\.hemadrama\.com/.*next.*$ url reject
^https?://.*\.hemadrama\.com/.*prev.*$ url reject
^https?://.*\.hemadrama\.com/.*continue.*$ url reject
^https?://.*\.hemadrama\.com/.*interstitial.*$ url reject
^https?://.*\.hemadrama\.com/.*midroll.*$ url reject
^https?://.*\.hemadrama\.com/.*preroll.*$ url reject
^https?://.*\.hemadrama\.com/.*postroll.*$ url reject

# 动态广告路径屏蔽（防止轮换）
^https?://.*\.hemadrama\.com/.*feed.*$ url reject
^https?://.*\.hemadrama\.com/.*video.*ad.*$ url reject
^https?://.*\.hemadrama\.com/.*player.*ad.*$ url reject
^https?://.*\.hemadrama\.com/.*timeline.*$ url reject
^https?://.*\.hemadrama\.com/.*recommend.*$ url reject
^https?://.*\.hemadrama\.com/.*hot.*$ url reject
^https?://.*\.hemadrama\.com/.*trending.*$ url reject

# 会话管理屏蔽（防止重新检测）
^https?://.*\.hemadrama\.com/.*session.*$ url reject
^https?://.*\.hemadrama\.com/.*heartbeat.*$ url reject
^https?://.*\.hemadrama\.com/.*ping.*$ url reject
^https?://.*\.hemadrama\.com/.*status.*$ url reject
^https?://.*\.hemadrama\.com/.*check.*$ url reject
^https?://.*\.hemadrama\.com/.*verify.*$ url reject
^https?://.*\.hemadrama\.com/.*validate.*$ url reject

# 用户行为分析屏蔽
^https?://.*\.hemadrama\.com/.*analytics.*$ url reject
^https?://.*\.hemadrama\.com/.*tracking.*$ url reject
^https?://.*\.hemadrama\.com/.*monitor.*$ url reject
^https?://.*\.hemadrama\.com/.*report.*$ url reject
^https?://.*\.hemadrama\.com/.*statistics.*$ url reject

# 第三方广告域名屏蔽
^https?://.*\.taifutj\.com/.*$ url reject
^https?://.*\.beibeicloud\.shop/.*$ url reject
^https?://.*\.adsystem\.com/.*$ url reject
^https?://.*\.adnxs\.com/.*$ url reject
^https?://.*\.amazon-adsystem\.com/.*$ url reject
^https?://.*\.googlesyndication\.com/.*$ url reject
^https?://.*\.doubleclick\.net/.*$ url reject

# 广告内容替换（防止重新加载）
^https?://.*\.hemadrama\.com/.*$ url response-body "advertisement":\s*\{[^}]*\} response-body "advertisement":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "ads":\s*\[[^\]]*\] response-body "ads":[]
^https?://.*\.hemadrama\.com/.*$ url response-body "banner":\s*\{[^}]*\} response-body "banner":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "promotion":\s*\{[^}]*\} response-body "promotion":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "popup":\s*\{[^}]*\} response-body "popup":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "splash":\s*\{[^}]*\} response-body "splash":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "commercial":\s*\{[^}]*\} response-body "commercial":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "marketing":\s*\{[^}]*\} response-body "marketing":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "campaign":\s*\[[^\]]*\] response-body "campaign":[]
^https?://.*\.hemadrama\.com/.*$ url response-body "promo":\s*\{[^}]*\} response-body "promo":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "brand":\s*\{[^}]*\} response-body "brand":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "sponsor":\s*\{[^}]*\} response-body "sponsor":{}

# 视频插播广告内容替换（重点优化）
^https?://.*\.hemadrama\.com/.*$ url response-body "video_ad":\s*\{[^}]*\} response-body "video_ad":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "episode_ad":\s*\{[^}]*\} response-body "episode_ad":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "transition_ad":\s*\{[^}]*\} response-body "transition_ad":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "interstitial":\s*\{[^}]*\} response-body "interstitial":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "midroll":\s*\{[^}]*\} response-body "midroll":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "preroll":\s*\{[^}]*\} response-body "preroll":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "postroll":\s*\{[^}]*\} response-body "postroll":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "player_ad":\s*\{[^}]*\} response-body "player_ad":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "stream_ad":\s*\{[^}]*\} response-body "stream_ad":{}
^https?://.*\.hemadrama\.com/.*$ url response-body "media_ad":\s*\{[^}]*\} response-body "media_ad":{}

# 广告配置替换（防止重新启用）
^https?://.*\.hemadrama\.com/.*$ url response-body "ad_enabled":\s*true response-body "ad_enabled":false
^https?://.*\.hemadrama\.com/.*$ url response-body "ad_config":\s*\{[^}]*\} response-body "ad_config":{"enabled":false,"frequency":0,"timeout":0}
^https?://.*\.hemadrama\.com/.*$ url response-body "user_type":\s*"free" response-body "user_type":"premium"
^https?://.*\.hemadrama\.com/.*$ url response-body "premium":\s*false response-body "premium":true
^https?://.*\.hemadrama\.com/.*$ url response-body "ad_free":\s*false response-body "ad_free":true

# HTML广告标签移除
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*splash[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*id="[^"]*splash[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*banner[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*id="[^"]*banner[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*popup[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*id="[^"]*popup[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*video-ad[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*id="[^"]*video-ad[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*advertisement[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*promotion[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*sponsor[^"]*"[^>]*>.*?</div> response-body ""

# 视频插播广告HTML标签移除（重点优化）
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*episode-ad[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*id="[^"]*episode-ad[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*transition-ad[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*id="[^"]*transition-ad[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*interstitial[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*id="[^"]*interstitial[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*midroll[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*preroll[^"]*"[^>]*>.*?</div> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <div[^>]*class="[^"]*postroll[^"]*"[^>]*>.*?</div> response-body ""

# 广告脚本移除
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*src="[^"]*ad[^"]*"[^>]*>.*?</script> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*>.*?advertisement.*?</script> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*>.*?banner.*?</script> response-body ""

# 视频插播广告脚本移除（重点优化）
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*>.*?video.*ad.*?</script> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*>.*?episode.*ad.*?</script> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*>.*?transition.*ad.*?</script> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*>.*?interstitial.*?</script> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*>.*?midroll.*?</script> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*>.*?preroll.*?</script> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <script[^>]*>.*?postroll.*?</script> response-body ""

# iframe广告移除
^https?://.*\.hemadrama\.com/.*$ url response-body <iframe[^>]*src="[^"]*ad[^"]*"[^>]*>.*?</iframe> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <iframe[^>]*src="[^"]*banner[^"]*"[^>]*>.*?</iframe> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <iframe[^>]*src="[^"]*promotion[^"]*"[^>]*>.*?</iframe> response-body ""

# 图片广告移除
^https?://.*\.hemadrama\.com/.*$ url response-body <img[^>]*src="[^"]*ad[^"]*"[^>]*> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <img[^>]*src="[^"]*banner[^"]*"[^>]*> response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body <img[^>]*src="[^"]*promotion[^"]*"[^>]*> response-body ""

# CSS样式广告隐藏
^https?://.*\.hemadrama\.com/.*$ url response-body \.ad[^}]*\{[^}]*\} response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body \.banner[^}]*\{[^}]*\} response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body \.promotion[^}]*\{[^}]*\} response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body \.sponsor[^}]*\{[^}]*\} response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body \.popup[^}]*\{[^}]*\} response-body ""
^https?://.*\.hemadrama\.com/.*$ url response-body \.splash[^}]*\{[^}]*\} response-body ""
